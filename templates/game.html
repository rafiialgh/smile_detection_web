{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/game.css') }}">
{% endblock %}

{% block content %}
<div class="mt-4 sm:mt-6 lg:mt-[25px] relative px-4 sm:px-6 lg:px-0">

  <!-- Loading -->
  <div id="loading" class="fixed inset-0 z-50 flex items-center justify-center hidden bg-black bg-opacity-50">
    <div class="relative px-20 py-10 overflow-hidden bg-white shimmer rounded-xl">
      <div
        class="border-8 rounded-full w-14 h-14 mx-10 border-t-8 border-t-[#252B75] animate-spin transition-all ease-in duration-0">
      </div>
      <div class="mt-2 font-sans font-bold text-center">Starting game...</div>
    </div>
  </div>

  <!-- Name Modal -->
  <div id="name-modal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 shadow-lg max-w-sm w-full">
      <h2 class="font-bungee text-2xl mb-4 text-center">Enter Your Name</h2>
      <input type="text" id="player-name" placeholder="Your name here..."
        class="w-full px-4 py-2 border border-gray-300 rounded mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
      <button id="submit-name"
        class="w-full bg-[#252B75] text-white py-2 rounded hover:bg-[#1d2266] transition-all">Start Game</button>
    </div>
  </div>

  <!-- Scoreboard Modal -->
  <div id="scoreboard-modal"
    class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-[1000] hidden">
    <div class="bg-white p-8 rounded-[15px] text-center w-[90%] max-w-[500px] max-h-[80vh] overflow-y-auto shadow-lg">

      <h2 class="font-bungee text-[#252B75] text-2xl mb-4">üèÜ SCOREBOARD üèÜ</h2>

      <ul id="scoreboard-list" class="list-none p-0 my-4 space-y-2">
        <!-- Scoreboard will be populated here -->
      </ul>

      <div class="flex gap-4 justify-center mt-6">
        <button id="new-game-btn"
          class="bg-[#252B75] text-white py-2 px-6 rounded-md font-semibold hover:bg-[#1a1f5a] transition">
          New Game
        </button>
        <button id="close-scoreboard-btn"
          class="bg-gray-600 text-white py-2 px-6 rounded-md font-semibold hover:bg-gray-700 transition">
          Close
        </button>
      </div>
    </div>
  </div>


  <!-- <div class="smile-image">
      <img src="static/images/smile.png" alt="smile" class="smile-img">
    </div> -->

  <div class="flex justify-center mt-10 mb-4 sm:mb-6 lg:mb-0">
    <h1
      class="font-bungee bg-[#FFE500] px-2 py-1 lg:px-5 lg:py-3 text-lg sm:text-xl md:text-4xl lg:text-5xl text-center">
      TOOTH CLEANING GAME ü¶∑
    </h1>
  </div>

  <div class="flex justify-center my-4 text-xl font-bold text-black gap-5">
    <div class="flex justify-center gap-8 bg-white px-5 py-3 rounded-lg">
      <div class="">Time: <span id="timer">15</span>s</div>
      <div>Score: <span id="score">0</span></div>
    </div>
    <div class="flex justify-center gap-8 bg-white px-5 py-3 rounded-lg hover:bg-slate-200 transition-all">
      <button id="scoreboard-button">
        Scoreboard üèÜ
      </button>
    </div>
  </div>


  <!-- Game area -->
  <div class="flex justify-center mt-4 sm:mt-6 lg:mt-10">
    <div
      class="relative w-full max-w-4xl aspect-[3/4] bg-gray-400 mx-4 sm:mx-0 rounded-lg border-4 border-white overflow-hidden">
      <div id="game-area" class="relative w-full h-full bg-cover bg-center"
        style="background-image: url('static/images/dentist_room.png');">
        <div id="kuman-area"
          class="absolute w-[40rem] h-80 top-1/2 bottom-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 z-50">

        </div>
        <img src="static/images/teeth_pixel.png" alt="teeth" id="teeth"
          class="w-full h-full object-contain pointer-events-none" />
      </div>

      <!-- Start Button -->
      <div id="start-modal" class="absolute inset-0 bg-black bg-opacity-25">
        <div class="relative flex justify-center items-center h-full">
          <button id="start-button" class="bg-white px-10 py-5 font-sans font-bold z-50 rounded-lg hover:bg-slate-200 text-2xl transition-all shadow-md shadow-black">
            ‚ñ∂ Play
        </button>
        </div>
        
      </div>
    </div>
  </div>


  <div class="flex justify-center px-2 mt-4 sm:mt-6 lg:mt-10">
    <h1
      class="font-bungee bg-[#FFE500] px-2 py-1 lg:px-5 lg:py-3 text-lg sm:text-xl md:text-4xl lg:text-5xl text-center">
      SWIPE THE GERMS TO CLEAN THE TEETH!
    </h1>
  </div>

  <!-- Game Over Modal -->
  <div id="game-over"
    class="hidden absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-8 rounded-lg border-4 border-[#252B75] text-center z-50">
    <h2 class="font-bungee text-2xl mb-2">Game Over!</h2>
    <p><strong>Player:</strong> <span id="final-player-name"></span></p>
    <p><strong>Final Score:</strong> <span id="final-score">0</span></p>
    <div class="flex gap-4 justify-center mt-4">
      <button id="view-scoreboard-btn"
        class="bg-[#252B75] hover:bg-[#1a1f5a] text-white px-4 py-2 rounded cursor-pointer text-base transition-colors">View
        Scoreboard</button>
      <button id="reset-button"
        class="bg-[#252B75] hover:bg-[#1a1f5a] text-white px-4 py-2 rounded cursor-pointer text-base transition-colors">Play
        Again</button>
    </div>
  </div>

</div>
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}